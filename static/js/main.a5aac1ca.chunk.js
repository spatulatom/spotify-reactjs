(this.webpackJsonpjamming=this.webpackJsonpjamming||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(25)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s,n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=(a(14),a(2)),l=a(3),u=a(1),h=a(5),m=a(4),p=(a(15),a(16),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={term:""},s.handleTermChange=s.handleTermChange.bind(Object(u.a)(s)),s.search=s.search.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"search",value:function(){this.props.onSearch(this.state.term),this.setState({term:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("input",{onChange:this.handleTermChange,placeholder:"track/arist/album",value:this.state.term}),r.a.createElement("button",{className:"SearchButton",onClick:this.search},r.a.createElement("span",{class:"fas fa-search fa-2x"})))}}]),a}(r.a.Component)),d=(a(17),a(18),a(19),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).addTrack=s.addTrack.bind(Object(u.a)(s)),s.removeTrack=s.removeTrack.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"addTrack",value:function(){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(){this.props.onRemove(this.props.track)}},{key:"renderAction",value:function(){return this.props.isRemoval?(console.log("checkin state",this.props.track),r.a.createElement("div",{className:"Track"},r.a.createElement("div",{className:"Track-information"},r.a.createElement("h4",null," ",this.props.track.name),r.a.createElement("p",null," ",this.props.track.artists)),r.a.createElement("button",{className:"Track-action",onClick:this.removeTrack},r.a.createElement("span",{class:"fa fa-trash-alt"})))):r.a.createElement("div",{className:"Track",onClick:this.addTrack},r.a.createElement("div",{className:"Track-information"},r.a.createElement("h4",null," ",this.props.track.name),r.a.createElement("p",null," ",this.props.track.artists)),r.a.createElement("button",{className:"Track-action"},r.a.createElement("span",{class:"fa fa-plus-square"})))}},{key:"render",value:function(){return this.renderAction()}}]),a}(r.a.Component)),f=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TrackList"},this.props.tracks.map((function(t){return r.a.createElement(d,{track:t,key:t.id,onAdd:e.props.onAdd,onRemove:e.props.onRemove,isRemoval:e.props.isRemoval})})))}}]),a}(r.a.Component),y=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h2",null,"Search Results:"),r.a.createElement(f,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:!1}))}}]),a}(r.a.Component),v=(a(20),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={term:""},s.handlePlaylistName=s.handlePlaylistName.bind(Object(u.a)(s)),s.savePlaylist=s.savePlaylist.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handlePlaylistName",value:function(e){this.setState({term:e.target.value}),this.props.onNameChange(e.target.value)}},{key:"savePlaylist",value:function(){this.props.onSave(),this.setState({term:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Playlist"},r.a.createElement("input",{onChange:this.handlePlaylistName,placeholder:"name your list",value:this.state.term}),r.a.createElement(f,{tracks:this.props.playlistTracks,onRemove:this.props.onRemove,isRemoval:!0}),r.a.createElement("button",{className:"Playlist-save",onClick:this.savePlaylist},"Save your playlist"))}}]),a}(r.a.Component)),g=a(8),k=(a(21),function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],o=a[1];return r.a.createElement("div",{class:s?"responsive topnav":"topnav",id:"myTopnav"},r.a.createElement("a",{href:"#",class:"icon",onClick:function(){o(!s)}},r.a.createElement("i",{class:"fa fa-bars"})),r.a.createElement("a",{href:"#"},"Home"),r.a.createElement("a",{href:"#section1"},"Create"),r.a.createElement("a",{href:"#section2"},"Add"),r.a.createElement("a",{href:"#section3"},"Comming Soon"),e.auth?r.a.createElement("a",{href:"#",class:"button",onClick:e.logOut}," Log out "):r.a.createElement("a",{href:"#",class:"button",onClick:e.logIn},"  Log in  "))}),b=(a(22),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement(k,{auth:this.props.onAuth,logOut:this.props.logOut,logIn:this.props.logIn,users:this.props.usersName}))))}}]),a}(r.a.Component)),S={getAccess:function(){if(s)return s;var e=localStorage.getItem("token"),t=new Date(localStorage.getItem("expirationDate"));if(e&&t<=new Date){alert("Your session has expired");var a=window.open("https://www.spotify.com/logout/","Spotify Logout","width=700,height=500,top=40,left=40");setTimeout((function(){return a.close()}),1e3);return window.location="http://localhost:3000/",localStorage.clear(),s=""}if(e&&t>new Date)return s=e;var n="https://accounts.spotify.com/authorize";n+="?client_id="+encodeURIComponent("e70b47b73b0d4e98ad0ea7ec50f8d2b8"),n+="&response_type=token&scope=playlist-modify-public",n+="&redirect_uri="+encodeURIComponent("https://spatulatom.github.io/spotify/"),window.location=n;var r=window.location.href.match(/access_token=([^&]*)/),o=window.location.href.match(/expires_in=([^&]*)/);s=r[1];var c=new Date((new Date).getTime()+1e3*o[1]);return localStorage.setItem("token",s),localStorage.setItem("expirationDate",c),s},checkYourLists:function(){var e,t=S.getAccess(),a={Authorization:"Bearer ".concat(t)};return fetch("https://api.spotify.com/v1/me",{headers:a}).then((function(e){return e.json()})).then((function(t){return e=t.id,fetch("https://api.spotify.com/v1/users/".concat(e,"/playlists"),{headers:a}).then((function(e){return e.json()})).then((function(e){return console.log("ourplaylists",e),e.items})).then((function(e){return e.map((function(e){return{name:e.name,id:e.id}}))}))}))},getUsersName:function(){return fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer ".concat(S.getAccess())}}).then((function(e){return e.json()})).then((function(e){return console.log("getUserName",typeof e.display_name,e.display_name),{name:e.display_name}}))},logOut:function(){if(s)return s=""},search:function(e){console.log("search");var t=S.getAccess();return fetch("https://api.spotify.com/v1/search?q=".concat(e,"&type=track,artist,album"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return console.log("search2"),e.json()})).then((function(e){return console.log("search3"),e.tracks?e.tracks.items.map((function(e){return{id:e.id,name:e.name,artists:e.artists[0].name,uri:e.uri}})):[]}))},savePlayList:function(e,t){if(e&&t.length){var a,s=S.getAccess(),n={Authorization:"Bearer ".concat(s)};return fetch("https://api.spotify.com/v1/me",{headers:n}).then((function(e){return e.json()})).then((function(s){return console.log("jsonRespone",s),a=s.id,fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{headers:n,method:"POST",body:JSON.stringify({name:e})}).then((function(e){return e.json()})).then((function(e){var s=e.id;return fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(s,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))}},addItemsToPlayList:function(e,t){if(e&&t.length){var a,s=S.getAccess(),n={Authorization:"Bearer ".concat(s)};return fetch("https://api.spotify.com/v1/me",{headers:n}).then((function(e){return e.json()})).then((function(s){return a=s.id,console.log("bla"),fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists"),{headers:n}).then((function(e){return e.json()})).then((function(s){console.log(s,"jsonResponse add items");var r=s.items.find((function(t){return t.name===e})),o=r.id;return console.log("bla bla",a,r),fetch("https://api.spotify.com/v1/users/".concat(a,"/playlists/").concat(o,"/tracks"),{headers:n,method:"POST",body:JSON.stringify({uris:t})})}))}))}},getPlaylist:function(e){var t,a=S.getAccess(),s={Authorization:"Bearer ".concat(a)};return fetch("https://api.spotify.com/v1/me",{headers:s}).then((function(e){return e.json()})).then((function(a){return t=a.id,fetch("https://api.spotify.com/v1/users/".concat(t,"/playlists/").concat(e),{headers:s}).then((function(e){return e.json()})).then((function(e){return e.tracks.items.map((function(e){return{song:e.track.name}}))}))}))}},N=S,O=(a(23),a(24),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={tracks:[]},s.getPlaylist=s.getPlaylist.bind(Object(u.a)(s)),s.clearTracks=s.clearTracks.bind(Object(u.a)(s)),s.addName=s.addName.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"getPlaylist",value:function(){var e=this;N.getPlaylist(this.props.id).then((function(t){e.setState({tracks:t}),console.log(t)}))}},{key:"clearTracks",value:function(){this.setState({tracks:[]})}},{key:"addName",value:function(){this.props.onAddName(this.props.name)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h3",{className:"Playlists-header"},this.props.name)," ")),r.a.createElement("div",{className:"Buttons"},r.a.createElement("button",{className:"Playlists-buttons",onClick:this.getPlaylist},"see ",r.a.createElement("br",null),"more"),r.a.createElement("button",{className:"Playlists-buttons",onClick:this.clearTracks},"see",r.a.createElement("br",null)," less"),r.a.createElement("a",{href:"#section2",className:"Playlists-buttons",onClick:this.addName},"add tracks")),this.state.tracks.map((function(e){return r.a.createElement("h5",null,e.song)})))}}]),a}(r.a.Component)),E=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={term:""},s.handlePlaylistName=s.handlePlaylistName.bind(Object(u.a)(s)),s.onAddItems=s.onAddItems.bind(Object(u.a)(s)),s.addName=s.addName.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"handlePlaylistName",value:function(e){this.setState({term:e.target.value}),this.props.onNameChange(e.target.value)}},{key:"onAddItems",value:function(){this.props.onAddItems(),this.setState({term:""})}},{key:"addName",value:function(e){this.setState({term:e}),this.props.onNameChange(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Playlists"},r.a.createElement("div",{className:"AddItems-topbar"},r.a.createElement("input",{className:"Playlists-input",onChange:this.handlePlaylistName,placeholder:"playlist's name",value:this.state.term}),r.a.createElement("button",{className:"Playlists-save",onClick:this.onAddItems},"Add tracks"),r.a.createElement(f,{tracks:this.props.playlistTracks,onRemove:this.props.onRemove,isRemoval:!0})),r.a.createElement("div",{className:"AddItems-playlists"},r.a.createElement("button",{onClick:this.props.onCheckYourLists,className:"Playlists-save"},"Check your current lists:"),r.a.createElement("div",null,this.props.onYourSpotifyLists.map((function(t){return r.a.createElement(O,{key:t.id,onAddName:e.addName,name:t.name,id:t.id})})))))}}]),a}(r.a.Component),j=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={searchResults:[],playlistName:"New/Existing List",playlistTracks:[],yourSpotifyLists:[],users:"",auth:!1},s.getSearchResultsFromLocalStorage=s.getSearchResultsFromLocalStorage.bind(Object(u.a)(s)),s.setSearchResultsInLocalStorage=s.setSearchResultsInLocalStorage.bind(Object(u.a)(s)),s.setUsersNameInLocalStorage=s.setUsersNameInLocalStorage.bind(Object(u.a)(s)),s.getUserFromLocalStorage=s.getUserFromLocalStorage.bind(Object(u.a)(s)),s.logIn=s.logIn.bind(Object(u.a)(s)),s.addTrack=s.addTrack.bind(Object(u.a)(s)),s.removeTrack=s.removeTrack.bind(Object(u.a)(s)),s.updatePlaylistName=s.updatePlaylistName.bind(Object(u.a)(s)),s.savePlaylist=s.savePlaylist.bind(Object(u.a)(s)),s.search=s.search.bind(Object(u.a)(s)),s.addItemsToPlaylist=s.addItemsToPlaylist.bind(Object(u.a)(s)),s.checkYourLists=s.checkYourLists.bind(Object(u.a)(s)),s.logOut=s.logOut.bind(Object(u.a)(s)),s.setAuthInLocalStorage=s.setAuthInLocalStorage.bind(Object(u.a)(s)),s.getAuthromLocalStorage=s.getAuthromLocalStorage.bind(Object(u.a)(s)),s.scrollToTop=s.scrollToTop.bind(Object(u.a)(s)),s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount"),this.getUserFromLocalStorage(),this.getAuthromLocalStorage(),this.getSearchResultsFromLocalStorage()}},{key:"getAuthromLocalStorage",value:function(){if(null===localStorage.getItem("auth"))localStorage.setItem("auth",JSON.stringify(this.state.auth));else{var e=JSON.parse(localStorage.getItem("auth"));this.setState({auth:e})}}},{key:"getUserFromLocalStorage",value:function(){if(null===localStorage.getItem("usersName"))localStorage.setItem("usersName",JSON.stringify(this.state.users));else{var e=JSON.parse(localStorage.getItem("usersName"));this.setState({users:e})}}},{key:"componentDidUpdate",value:function(e){console.log("componentDidUpdate"),this.setSearchResultsInLocalStorage(),this.setUsersNameInLocalStorage(),this.setAuthInLocalStorage()}},{key:"setAuthInLocalStorage",value:function(){localStorage.setItem("auth",JSON.stringify(this.state.auth))}},{key:"setSearchResultsInLocalStorage",value:function(){localStorage.setItem("searchResults",JSON.stringify(this.state.searchResults))}},{key:"setUsersNameInLocalStorage",value:function(){localStorage.setItem("usersName",JSON.stringify(this.state.users))}},{key:"getSearchResultsFromLocalStorage",value:function(){if(null===localStorage.getItem("searchResults"))localStorage.setItem("searchResults",JSON.stringify([]));else{var e=JSON.parse(localStorage.getItem("searchResults"));this.setState({searchResults:e})}}},{key:"logIn",value:function(){var e=this;N.getUsersName().then((function(t){t.name.length<1?e.setState({users:t.name}):e.setState({users:"Have fun!"}),e.setState({auth:!0})})).catch((function(t){e.setState({users:"Incognito"}),e.setState({auth:!1})}))}},{key:"logOut",value:function(){var e=window.open("https://www.spotify.com/logout/","Spotify Logout","width=700,height=500,top=40,left=40");setTimeout((function(){return e.close()}),2e3),this.setState({users:""}),this.setState({searchResults:[]}),this.setState({auth:!1}),this.setState({yourSpotifyLists:[]}),localStorage.clear(),N.logOut()}},{key:"addTrack",value:function(e){var t=this.state.playlistTracks;t.find((function(t){return t.id===e.id}))||(t.push(e),this.setState({playlistTrack:t}))}},{key:"removeTrack",value:function(e){var t=this.state.playlistTracks;t=t.filter((function(t){return t.id!==e.id})),this.setState({playlistTracks:t})}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"savePlaylist",value:function(){var e=this,t=this.state.playlistTracks.map((function(e){return e.uri}));N.savePlayList(this.state.playlistName,t).then((function(){e.setState({playlistName:"New/Existing List",playlistTracks:[],searchResults:[]}),e.checkYourLists()}))}},{key:"addItemsToPlaylist",value:function(){var e=this,t=this.state.playlistTracks.map((function(e){return e.uri}));console.log("trackUris",t),N.addItemsToPlayList(this.state.playlistName,t).then((function(){e.setState({playlistName:"Name your playlist",playlistTracks:[]})})),this.setState({playlistName:"Name your playlist",playlistTracks:[]})}},{key:"checkYourLists",value:function(){var e=this;this.logIn(),N.checkYourLists().then((function(t){e.setState({yourSpotifyLists:t}),e.setState({auth:!0})}))}},{key:"search",value:function(e){var t=this;N.search(e).then((function(e){t.setState({searchResults:e}),t.setState({auth:!0})}))}},{key:"scrollToTop",value:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},{key:"render",value:function(){return r.a.createElement("div",{className:"Main"},r.a.createElement(b,{onAuth:this.state.auth,logOut:this.logOut,logIn:this.logIn}),r.a.createElement("h1",null,"Manage",r.a.createElement("span",{className:"highlight"}," Your Spotify","Have fun!"===this.state.users?r.a.createElement("span",null,"."):null," "),this.state.users),this.state.auth?null:r.a.createElement("h4",null,"Send to tomspatula@gmail.com your Spotify email addresss and username for this app's usage, thanks "),r.a.createElement("butoon",{onClick:this.scrollToTop,id:"btnScrollToTop"},r.a.createElement("i",{class:"material-icons"},"arrow_upward")),r.a.createElement("div",{className:"App"},r.a.createElement("section",{id:"section1",class:"one"},r.a.createElement("h2",{className:"header"},"Create Your New Playlist"),r.a.createElement(p,{onSearch:this.search}),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(y,{searchResults:this.state.searchResults,onAdd:this.addTrack}),r.a.createElement(v,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onRemove:this.removeTrack,onNameChange:this.updatePlaylistName,onSave:this.savePlaylist}))),r.a.createElement("section",{id:"section2",class:"two"},r.a.createElement("h2",{className:"header"},"Add Tracks to Your Playlists"),r.a.createElement(p,{onSearch:this.search}),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(y,{searchResults:this.state.searchResults,onAdd:this.addTrack}),r.a.createElement(E,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onRemove:this.removeTrack,onNameChange:this.updatePlaylistName,onAddItems:this.addItemsToPlaylist,onYourSpotifyLists:this.state.yourSpotifyLists,onCheckYourLists:this.checkYourLists})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.a5aac1ca.chunk.js.map